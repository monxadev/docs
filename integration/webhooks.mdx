---
title: "Webhooks"
description: "Listen to key events in Monxa, including payment intents, charge, and other important notifications."
---

## Introduction

AÂ **webhook**Â is aÂ **POST request sent from Monxaâ€™s server to your endpoint**Â to inform you of payment or transaction updates. When integrating Monxa APIs into your e-commerce checkout,Â **update the order status to â€œpaidâ€ only after the webhook is received and verified**.

## Handling a Webhook

1. **Create a Webhook Endpoint**\
   Create an endpoint on your server to receive POST requests, e.g.:

   ```
   POST /payment-confirmation/webhook
   ```

   The request will have a content type ofÂ `application/x-www-form-urlencoded`.
2. **Validate the Webhook**\
   Verify the webhook payload using yourÂ **secret key (salt value)**Â to ensure it is sent from Monxa.
3. **Respond to the Webhook**\
   ReturnÂ **HTTP status code 200 OK**Â to acknowledge receipt.
4. **Process the Payment**\
   Once validated,Â **mark the corresponding order as paid**Â in your system.

<AccordionGroup>
  <Accordion title="Sample Webhook Payload">
    ```json
    {
      "id": "9e9a3451-a3e5-4fc5-9dfc-bc75e67c8808",
      "business_id": "98567029-f559-49f9-916b-042a4255b32a",
      "channel": "point_of_sale",
      "customer_id": "9b3503bd-fd04-4e39-9271-b2bc26fa5c96",
      "status": "succeeded",
      "currency": "SGD",
      "amount": 913.84,
      "order": {
        "id": "9e9a344b-2c04-44f4-b521-e36dce8f4ade",
        "order_display_number": 2766
      }
    }
    ```
  </Accordion>
</AccordionGroup>

## Validating a Webhook

To ensure that a webhook payload isÂ **authentic and secure**, follow these steps:

<AccordionGroup>
  <Accordion title="1. Extract the Payload">
    Extract the key-value pairs from the webhook POST request.

    ```json
    payment_id=92965a2d-ece3-4ace-1245-494050c9a3c1&
    payment_request_id=92965a20-dae5-4d89-a452-5fdfa382dbe1&
    reference_number=ABC123&
    phone=&
    amount=599.00&
    currency=SGD&
    status=completed&
    hmac=330c34a6a8fb9ddb75833620dedb94bf4d4c2e51399d346cbc2b08c381a1399c
    ```
  </Accordion>
  <Accordion title="2. Exclude HMAC">
    Remove theÂ `hmac`Â key and its value from the payload. This ensures the HMAC is not included in signature generation.
  </Accordion>
  <Accordion title="3. Concatenate & Sort">
    - Concatenate theÂ **keys and values**Â of the remaining payload withoutÂ `&`Â orÂ `=`.
    - Sort the keys inÂ **alphabetical order**.

    **Example Concatenated String:**

    ```json
    amount599.00
    currencySGD
    payment_id92965a2d-ece3-4ace-1245-494050c9a3c1
    payment_request_id92965a20-dae5-4d89-a452-5fdfa382dbe1
    phone
    reference_numberABC123
    statuscompleted
    ```
  </Accordion>
  <Accordion title="4. Generate Signature">
    - Use theÂ **HMAC-SHA256 algorithm**Â with yourÂ **secret key (salt)**Â from the Monxa dashboard.
    - Generate a signature for the concatenated string.
    - This signature is unique to the payload.
  </Accordion>
  <Accordion title="5. Compare Signature">
    - Compare the generated signature with theÂ `hmac`Â value from the original payload.
    - If theyÂ **match**, the webhook is valid and can be trusted.
    - If theyÂ **donâ€™t match**, discard the webhook and log for review.
  </Accordion>
</AccordionGroup>

<Tip>
  **Result:** Following this process guarantees the authenticity and integrity of webhook payloads, ensuring your system processes only secure, verified transactions.
</Tip>

### **Sample Code**

<CodeGroup>

```PHP PHP
function generateSignatureArray($secret, array $args) {   
  $hmacSource = [];        
  foreach ($args as $key => $val) {
    $hmacSource[$key] = "{$key}{$val}";
  }
  ksort($hmacSource);
  $sig            = implode("", array_values($hmacSource));
  $calculatedHmac = hash_hmac('sha256', $sig, $secret); 

  return $calculatedHmac;
}
```


```javascript NodeJS
var crypto = require('crypto');

function generateSignatureArray(secret, vals) {
  const source = [];
  Object.keys(vals).sort().forEach((key) => {
    source.push(`${key}${vals[key]}`);
  });
  var payload = source.join("");
  const hmac = crypto.createHmac('sha256', secret);
  console.log(payload)
  let signed = hmac.update(Buffer.from(payload, 'utf-8')).digest("hex");
  return signed;
}
```

</CodeGroup>

### **List of Webhook Events**

Monxa provides a set of **event notifications** that you can listen to and act upon. These events help you track the lifecycle of payments, payouts, and intents.

### Available Events ğŸ””

| **Event Name**      | **When does it trigger?**                                     |
| ------------------- | ------------------------------------------------------------- |
| `charge.created`    | âœ… Triggered once a payment is successfully completed          |
| `charge.updated`    | ğŸ”„ Triggered when a payment is refunded or partially refunded |
| `payout.created`    | ğŸ’¸ Triggered once a payout is successfully created            |
| `payout.processing` | âš™ï¸ Triggered once the payout is processing                    |
| `payout.paid`       | ğŸ’° Triggered once the payout is paid                          |
| `payout.failed`     | âŒ Triggered once the payout has failed                        |
| `payout.canceled`   | ğŸš« Triggered once the payout is canceled                      |
| `intent.created`    | ğŸ›’ Triggered once an intent is created successfully           |
| `intent.updated`    | ğŸ”„ Triggered once an intent status is updated                 |

### Example Event Payloads - Charge

<CodeGroup>

```json charge.created
{
  "event": "charge.created",
  "data": {
    "charge_id": "ch_12345",
    "amount": 5000,
    "currency": "USD",
    "status": "succeeded",
    "created_at": "2025-09-10T12:00:00Z"
  }
}
```


```json charge.updated
{
  "event": "payout.paid",
  "data": {
    "payout_id": "po_67890",
    "amount": 10000,
    "currency": "USD",
    "status": "paid",
    "paid_at": "2025-09-10T15:00:00Z"
  }
}
```

</CodeGroup>

### Example Event Payloads - Payout

<CodeGroup>

```json payout.created
{
  "event": "payout.failed",
  "data": {
    "payout_id": "po_67890",
    "amount": 10000,
    "currency": "USD",
    "status": "failed",
    "reason": "Insufficient funds",
    "failed_at": "2025-09-10T16:00:00Z"
  }
}
```


``` payout.processing
```


``` payout.paid
```


``` payout.failed
```


``` payout.cancelled
```

</CodeGroup>

### Example Event Payloads - Payment Intent

<CodeGroup>

```json intent.created
{
  "event": "payout.failed",
  "data": {
    "payout_id": "po_67890",
    "amount": 10000,
    "currency": "USD",
    "status": "failed",
    "reason": "Insufficient funds",
    "failed_at": "2025-09-10T16:00:00Z"
  }
}
```


``` intent.updated
```

</CodeGroup>